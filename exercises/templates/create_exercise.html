{% extends 'base/base.html' %}
{% block title %} Create Exercise {% endblock %}
{% load static %}

{% block estilo %} 
<style>
    .form-container {
        max-width: 600px;
        margin: auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .form-container h2 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }
    .form-group input,
    .form-group textarea,
    .form-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 14px;
    }
    .btn-submit {
        display: block;
        width: 100%;
        padding: 10px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        margin-top: 10px;
    }
    .btn-submit:hover {
        background: #0056b3;
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <h2>Create Exercise</h2>
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_description">Description</label>
            {{ form.description }}
        </div>

        <div class="form-group">
            <label for="id_url_video">Video URL (Optional)</label>
            {{ form.url_video }}
        </div>

        <div class="form-group">
            <label for="id_phrase_multiple_option">Phrase for Multiple Option</label>
            {{ form.phrase_multiple_option }}
        </div>

        

        <!-- Contenedor para las opciones -->
        <div class="form-group">
            <label>Options:</label>
            <div id="options-container">
                <div class="option-group">
                    <h3>Enter the option in the next way</h3>
                    <h4>1 - here an answer </h4>
                    <h4>2 - here an answer </h4>
                    <input type="text" name="options[]" class="form-control option-input" placeholder="Enter an option">
                    <button type="button" class="btn btn-danger btn-sm remove-option">Remove</button>
                </div>
            </div>
            <button type="button" id="add-option" class="btn btn-success btn-sm mt-2">Add Option</button>
        </div>

        <div class="form-group">
            <label for="id_answer_correct_multiOption">Correct Answer, please, only enter the option's number</label>
            {{ form.answer_correct_multiOption }}
        </div>

        <button type="submit" class="btn-submit">Create Exercise</button>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const optionsContainer = document.getElementById("options-container");
        const addOptionBtn = document.getElementById("add-option");

        // Agregar una nueva opci贸n
        addOptionBtn.addEventListener("click", function() {
            const optionDiv = document.createElement("div");
            optionDiv.classList.add("option-group");
            optionDiv.innerHTML = `
                <input type="text" name="options[]" class="form-control option-input" placeholder="Enter an option">
                <button type="button" class="btn btn-danger btn-sm remove-option">Remove</button>
            `;
            optionsContainer.appendChild(optionDiv);
        });

        // Eliminar opci贸n al hacer clic en "Remove"
        optionsContainer.addEventListener("click", function(event) {
            if (event.target.classList.contains("remove-option")) {
                event.target.parentElement.remove();
            }
        });
    });
     /*
     Explicaci贸n Profunda Paso a Paso
    
    1锔 DOMContentLoaded:
    document.addEventListener("DOMContentLoaded", function() {...});
    - Este c贸digo espera a que la p谩gina est茅 completamente cargada antes de ejecutar la funci贸n.
    - El evento "DOMContentLoaded" se dispara cuando el HTML ha sido completamente cargado y parseado, antes de que se carguen im谩genes y estilos.
    - Evita errores que ocurren si el script se ejecuta antes de que los elementos del DOM existan.
    
     Ejemplo de por qu茅 es necesario:
    Si el c贸digo intentara seleccionar document.getElementById("options-container") antes de que el HTML estuviera listo, fallar铆a con null o undefined.
    
    2锔 Seleccionar elementos del DOM
    const optionsContainer = document.getElementById("options-container"); // Obtiene el contenedor donde se agregar谩n las opciones.
    const addOptionBtn = document.getElementById("add-option"); // Obtiene el bot贸n que agregar谩 nuevas opciones al formulario.
    
     Ejemplo:
    Si el HTML tiene esto:
    <div id="options-container"></div>
    <button id="add-option">Add Option</button>
    
    El c贸digo guarda referencias a estos elementos para manipularlos despu茅s.
    
    3锔 Agregar Evento al Bot贸n ("Add Option")
    addOptionBtn.addEventListener("click", function() {...});
    - Detecta cuando el usuario hace clic en el bot贸n "Add Option".
    - Ejecuta la funci贸n interna cada vez que el bot贸n es presionado.
    
     驴Por qu茅 usamos addEventListener en lugar de onclick?
    - Permite agregar m煤ltiples eventos sin sobrescribirlos.
    - Es m谩s flexible y mantenible en aplicaciones grandes.
    
    4锔 Crear un Nuevo div para la Opci贸n
    const optionDiv = document.createElement("div");
    optionDiv.classList.add("option-group");
    - document.createElement("div") crea un nuevo <div> din谩micamente en JavaScript.
    - optionDiv.classList.add("option-group") le a帽ade una clase CSS para estilizarlo.
    
    5锔 Insertar C贸digo HTML Dentro del div
    optionDiv.innerHTML = `
        <input type="text" name="options[]" class="form-control option-input" placeholder="Enter an option">
        <button type="button" class="btn btn-danger btn-sm remove-option">Remove</button>
    `;
    - .innerHTML = ... agrega contenido HTML dentro del div reci茅n creado.
    - Se a帽aden:
        - Un campo de entrada (<input>) para que el usuario escriba la opci贸n.
        - Un bot贸n (<button>) para eliminar la opci贸n.
    
     驴Por qu茅 usamos innerHTML en lugar de appendChild?
    - innerHTML es m谩s r谩pido cuando necesitamos agregar m煤ltiples elementos a la vez.
    - appendChild() se usa cuando queremos agregar elementos uno por uno.
    
    6锔 Agregar el div al Contenedor
    optionsContainer.appendChild(optionDiv);
    - Inserta el nuevo div dentro del options-container.
    - El usuario ve la nueva opci贸n en pantalla inmediatamente.
    
    7锔 Detectar Clics en "Remove" y Eliminar la Opci贸n
    optionsContainer.addEventListener("click", function(event) {
        if (event.target.classList.contains("remove-option")) {
            event.target.parentElement.remove();
        }
    });
    - Escucha clicks en todo el options-container.
    - Es m谩s eficiente que agregar un addEventListener a cada bot贸n individualmente.
    
     Ejemplo:
    1锔 El usuario hace clic en el bot贸n "Remove".
    2锔 event.target es el bot贸n en el que se hizo clic.
    3锔 event.target.parentElement.remove(); elimina el div padre que contiene el campo y el bot贸n.
    */
</script>
{% endblock %}
